(function(){var e=this,t=e.Preload,n=e.Preload={};n.VERSION="0.0.0",n.noConflict=function(){return e.Preload=t,this};var r=n.ImageLoader=function(){this._resources=[],this._triggers={},this._completed=!1};r.prototype={on:function(e,t){typeof t=="function"&&(this._triggers[e]=t)},trigger:function(e){typeof this._triggers[e]=="function"&&this._triggers[e]()},getResource:function(e){var t,n;n=null;for(t=0;t<this._resources.length;t++)if(e==this._resources[t].url){this._resources[t].resource&&(n=this._resources[t].resource);break}return n},numOfLoading:function(){var e,t,n;t=0,n=this._resources.length;for(e=0;e<n;e++)this._resources[e].resource===null&&t++;return t},load:function(e,t){var n,r,i;this._completed=!1,t&&(this._resources=[]);for(n=0;n<e.length;n++){i=!1;for(r=0;r<this._resources.length;r++)if(e[n]==this._resources[r].url){i=!0;break}i||this._resources.push({url:e[n],resource:null})}if(this.numOfLoading()>0){var s=this,o=function(){!s._completed&&s.numOfLoading()===0&&(s._completed=!0,s.trigger("complete"))};for(n=0;n<this._resources.length;n++){if(this._resources[n].resource)continue;this._resources[n].resource=new Image,this._resources[n].resource.src=this._resources[n].url,this._resources[n].resource.onload=o}}else this._completed=!0,this.trigger("complete")}}}).call(this);