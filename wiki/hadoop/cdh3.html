<!DOCTYPE html>
<html>
<head>
<meta http-equiv="Content-type" content="text/html; charset=utf-8">
<title>CDH3</title>
<link href="/wiki/assets/bootstrap/css/bootstrap.min.css" media="screen" rel="stylesheet" type="text/css">
<link href="/wiki/assets/stylesheets/style.css" media="screen" rel="stylesheet" type="text/css">
<script src="/wiki/assets/javascripts/jquery-1.7.1.min.js"></script>
<script src="/wiki/assets/bootstrap/js/bootstrap.min.js"></script>
<script src="/wiki/assets/javascripts/jquery.toctree.js"></script>
<script>

(function($) {

    $(function() {
        $('#toc').toctree({ selector:'#content :header', offset:1, depth:3 });
    });

})(window.jQuery);

</script>
</head>
<body>
<div id="wrapper">
  <div id="header">
    <div class="navbar navbar-static-top navbar-inverse">
      <div class="navbar-inner">
        <div class="pull-left">
          <a class="btn btn-inverse" href="/wiki"><i class="icon-home icon-white"></i></a>
        </div>
        <ul class="nav">
          <li><a href="/wiki/hadoop/index.html">Hadoop</a></li>
        </ul>
        <form class="navbar-search pull-right" action="/wiki/search.html">
          <input type="text" class="search-query" name="q" placeholder="Search">
        </form>
      </div>
    </div>
  </div>
  <!--/#header-->
  <div id="main">
    <div class="container-fluid">
      <ul class="breadcrumb">
        <li><a href="/wiki/hadoop/index.html">Hadoop</a> <span class="divider">/</span></li><li>CDH3</li>
      </ul>
    </div>
    <div class="container-fluid">
      <div class="row-fluid">
        <div class="span3">
          <div id="navigation">
            <div class="toctree well">
              <ul class="nav nav-list">
                <li class="nav-header">Table of Contents</li>
              </ul>
              <ul class="nav nav-list"><li class="active"><a href="/wiki/hadoop/cdh3.html">CDH3</a></li></ul>
            </div>
          </div>
        </div>
        <div class="span9">
          <div id="content">
          <h1>CDH3</h1>
          <div id="toc">
          </div>
          <h2>概要</h2>

<p><strong>Cloudera</strong></p>

<p><a href="http://www.cloudera.com/">http://www.cloudera.com/</a></p>

<p><strong>CDH3 Installation</strong></p>

<p><a href="https://ccp.cloudera.com/display/CDHDOC/CDH3+Installation">https://ccp.cloudera.com/display/CDHDOC/CDH3+Installation</a></p>

<h2>RedHat/CentOS</h2>

<p>CDH3 のリポジトリを追加します。</p>

<p>RedHat/CentOS 5:</p>

<pre><code>% vi /etc/yum.repos.d/cloudera-cdh3.repo

....

[cloudera-cdh3]
# Packages for Cloudera's Distribution for Hadoop, Version 3, on RedHat or CentOS 5
name=Cloudera's Distribution for Hadoop, Version 3
mirrorlist=http://archive.cloudera.com/redhat/cdh/3/mirrors
gpgkey = http://archive.cloudera.com/redhat/cdh/RPM-GPG-KEY-cloudera
gpgcheck = 1

....

# (Optional) Add the Cloudera Public GPG Key
% rpm --import http://archive.cloudera.com/redhat/cdh/RPM-GPG-KEY-cloudera
</code></pre>

<p>RedHat/CentOS 6 (x86_64):</p>

<pre><code>% vi /etc/yum.repos.d/cloudera-cdh3.repo

....

[cloudera-cdh3]
# Packages for Cloudera's Distribution for Hadoop, Version 3, on RedHat or CentOS 6
name=Cloudera's Distribution for Hadoop, Version 3
mirrorlist=http://archive.cloudera.com/redhat/6/x86_64/cdh/3/mirrors
gpgkey = http://archive.cloudera.com/redhat/6/x86_64/cdh/RPM-GPG-KEY-cloudera
gpgcheck = 1

....

# (Optional) Add the Cloudera Public GPG Key
% rpm --import http://archive.cloudera.com/redhat/6/x86_64/cdh/RPM-GPG-KEY-cloudera
</code></pre>

<p>すべてのマシンに <code>hadoop-0.20</code> <code>hadoop-0.20-native</code> パッケージをインストールします。</p>

<pre><code>% yum search hadoop
% yum install hadoop-0.20 hadoop-0.20-native
</code></pre>

<p>各割り当てマシン毎に必要なデーモンのパッケージをインストールします。</p>

<pre><code>% yum install hadoop-0.20-&lt;daemon type&gt;
....
</code></pre>

<ul>
<li>namenode</li>
<li>datanode</li>
<li>secondarynamenode</li>
<li>jobtracker</li>
<li>tasktracker</li>
</ul>


<h2>Java Development Kit</h2>

<p>Oracle JDK (Sun JDK) の利用が推奨されています。</p>

<p><code>/etc/hadoop-0.20/conf/hadoop-evn.sh</code> の <code>JAVA_HOME</code> を設定しておきます。</p>

<pre><code>% vim /etc/hadoop-0.20/conf/hadoop-env.sh

....
# export JAVA_HOME=/usr/lib/j2sdk1.6-sun
export JAVA_HOME=/usr/local/jdk1.6.0_35

....
</code></pre>

<h2>疑似分散モード</h2>

<p><code>hadoop-0.20-conf-pseudo</code> パッケージで１台構成の疑似分散モードでの設定と一通りのデーモンがインストールできます。</p>

<pre><code>% yum install hadoop-0.20-conf-pseudo
</code></pre>

<p>疑似分散モードの設定ファイル <code>/etc/hadoop-0.20/conf.pseudo</code> が作られます。 <code>alternatives</code> で <code>/etc/hadoop-0.20/conf/</code> が <code>/etc/hadoop-0.20/conf.pseudo/</code> のシンボリックリンクになっている事がわかります。</p>

<pre><code>% ls -l /etc/hadoop-0.20/
lrwxrwxrwx 1 root root   34  ... conf -&gt; /etc/alternatives/hadoop-0.20-conf
drwxr-xr-x 2 root root 4096  ... conf.empty
drwxr-xr-x 2 root root 4096  ... conf.pseudo

% ls -l /etc/alternatives/hadoop-0.20-conf
lrwxrwxrwx 1 root root 28    ... /etc/alternatives/hadoop-0.20-conf -&gt; /etc/hadoop-0.20/conf.pseudo
</code></pre>

<p>Hadoop 用に以下のユーザが追加されます。</p>

<ul>
<li><code>mapred</code> : Hadoop MapReduce</li>
<li><code>hdfs</code> : Hadoop HDFS</li>
</ul>


<p><code>hdfs</code> ユーザで NameNode を初期化し <code>hadoop-0.20-*</code> のすべてのデーモンを起動します。</p>

<pre><code>% sudo -u hdfs hadoop namenode -format
% for service in /etc/init.d/hadoop-0.20-*; do sudo $service start; done
</code></pre>

          </div>
        </div>
      </div>
    </div>
  </div>
  <!--/#main-->
  <div id="footer">
<div class="container-fluid">
  <div class="row-fluid">
    <div class="span12">
      <dl class="dl-horizontal pull-right">
        <dt><span class="muted">Repository</span></dt>
        <dd><a href="https://github.com/tachesimazzoca/wiki">tachesimazzoca/wiki</a></dd>
        <dt><span class="muted">Author</span></dt>
        <dd><a href="https://github.com/tachesimazzoca">@tachesimazzoca</a></dd>
      </dl>
    </div>
  </div>
</div>
</div>
<!--/#footer-->

</div>
<!--/#wrapper-->
</body>
</html>

